p8105_hw3_hn2453
================
Huiyan Ni
2024-10-16

## Problem 1, study from problem 1 solution.

``` r
library(p8105.datasets)
data("ny_noaa")
head(ny_noaa)
```

    ## # A tibble: 6 × 7
    ##   id          date        prcp  snow  snwd tmax  tmin 
    ##   <chr>       <date>     <int> <int> <int> <chr> <chr>
    ## 1 US1NYAB0001 2007-11-01    NA    NA    NA <NA>  <NA> 
    ## 2 US1NYAB0001 2007-11-02    NA    NA    NA <NA>  <NA> 
    ## 3 US1NYAB0001 2007-11-03    NA    NA    NA <NA>  <NA> 
    ## 4 US1NYAB0001 2007-11-04    NA    NA    NA <NA>  <NA> 
    ## 5 US1NYAB0001 2007-11-05    NA    NA    NA <NA>  <NA> 
    ## 6 US1NYAB0001 2007-11-06    NA    NA    NA <NA>  <NA>

This dataset has 2595176 rows and 7 columns. Variables include
id(Weather station ID), date(Date of observation), prcp(Precipitation
(tenths of mm)), snow(Snowfall (mm)), snwd(Snow depth (mm)),
tmax(Maximum temperature (tenths of degrees C)) and tmin(Minimum
temperature (tenths of degrees C)).

``` r
ny_noaa %>% 
  count(snow) %>%
  arrange(desc(n))
```

    ## # A tibble: 282 × 2
    ##     snow       n
    ##    <int>   <int>
    ##  1     0 2008508
    ##  2    NA  381221
    ##  3    25   31022
    ##  4    13   23095
    ##  5    51   18274
    ##  6    76   10173
    ##  7     8    9962
    ##  8     5    9748
    ##  9    38    9197
    ## 10     3    8790
    ## # ℹ 272 more rows

From previous function, we can get the most counts of snow is 0, then
NA, 25,13 and so on.

Create separate variables for year, month, and day.

``` r
ny_noaa = 
  ny_noaa %>% 
  separate(date, into = c("year", "month", "day"), convert = TRUE) %>% 
  mutate(
    tmax = as.numeric(tmax),
    tmin = as.numeric(tmin))


head(ny_noaa)
```

    ## # A tibble: 6 × 9
    ##   id           year month   day  prcp  snow  snwd  tmax  tmin
    ##   <chr>       <int> <int> <int> <int> <int> <int> <dbl> <dbl>
    ## 1 US1NYAB0001  2007    11     1    NA    NA    NA    NA    NA
    ## 2 US1NYAB0001  2007    11     2    NA    NA    NA    NA    NA
    ## 3 US1NYAB0001  2007    11     3    NA    NA    NA    NA    NA
    ## 4 US1NYAB0001  2007    11     4    NA    NA    NA    NA    NA
    ## 5 US1NYAB0001  2007    11     5    NA    NA    NA    NA    NA
    ## 6 US1NYAB0001  2007    11     6    NA    NA    NA    NA    NA

Make a two-panel plot showing the average max temperature in January and
in July in each station across years

``` r
ny_noaa %>% 
  group_by(id, year, month) %>% 
  filter(month %in% c(1, 7)) %>% 
  summarize(mean_tmax = mean(tmax, na.rm = TRUE, color = id)) %>% 
  ggplot(aes(x = year, y = mean_tmax, group = id)) + geom_point() + geom_path() +
  facet_grid(~month) +
  labs(title = "Mean monthly temperature for each station across years for January and July")
```

    ## `summarise()` has grouped output by 'id', 'year'. You can override using the
    ## `.groups` argument.

<img src="p8105_hw3_hn2453_files/figure-gfm/unnamed-chunk-4-1.png" width="90%" />

``` r
str(ny_noaa)
```

    ## tibble [2,595,176 × 9] (S3: tbl_df/tbl/data.frame)
    ##  $ id   : chr [1:2595176] "US1NYAB0001" "US1NYAB0001" "US1NYAB0001" "US1NYAB0001" ...
    ##  $ year : int [1:2595176] 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 ...
    ##  $ month: int [1:2595176] 11 11 11 11 11 11 11 11 11 11 ...
    ##  $ day  : int [1:2595176] 1 2 3 4 5 6 7 8 9 10 ...
    ##  $ prcp : int [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ snow : int [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ snwd : int [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ tmax : num [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ tmin : num [1:2595176] NA NA NA NA NA NA NA NA NA NA ...
